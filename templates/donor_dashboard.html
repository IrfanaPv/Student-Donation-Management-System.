{% extends 'homepage.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>

</head>
<body>
    {% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}
    <div class="container mt-4">
    
        <h2>Welcome, {{ data.name }}!</h2>
         <a href="{% url 'donor_profile' %}" class="btn btn-success" style="position: relative; left: 0px; font-size: medium;">View Profile</a>
         <a  class="btn btn-success"  href="{% url 'logout_page' %}" style="position: relative;  left: 30px; width: 120px;  font-size: medium;">Logout</a>
        
        <h4 class="mt-4">Your Donations</h4>
    
        {% if x %}
            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Student Name</th>
                        <th>Item</th>
                        <th>Amount Donated</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in x %}
                    <tr>
                        <td>{{ i.donation_request.stud.name }}</td>
                        <td>{{ i.donation_request.title }}</td> 
                        <td>${{ i.amount }}</td>
                        <td>{{ i.donated_at }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
    
            <div class="alert alert-info">
                <strong>Total Donated:</strong> ${{ total }}
            </div>
        {% else %}
            <p>You haven’t made any donations yet.</p>
        {% endif %}
        <a  class="btn btn-success"  href="{% url 'donation' %}" style="position: relative; top: 50px;  width: 240px;  font-size: large;">Donate</a>

    </div>
    
    {% endblock %}

    <script>
  setTimeout(function() {
    let alert = document.querySelector('.alert');
    if (alert) {
      alert.classList.remove('show');
      alert.classList.add('fade');
    }
  }, 3000); // dismiss after 3 seconds
</script>
</body>
</html>